<!doctype html>

<head>
  <link rel="stylesheet" type="text/css" href="/static/css/style.css">
  <link rel="stylesheet" type="text/css" href="/static/css/input.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/45c5b12d62.js"></script>
  <script src="/static/js/jquery-3.4.1.min.js"></script>
</head>

<body>
  <nav class="side-bar-nav">
    <div class="logo-nav-block">
      <p> Partners </br> in </br> Health </p>
    </div>
    <a href="{{ url_for('home') }}">
      <div class="item-logo-block nav-block-highlighted">
        <img src="/static/image/record-upload.png">
        <p>Scan Record</p>
      </div>
    </a>
    <div class="item-logo-block">
      <img src="/static/image/search.png">
      <p>Search</p>
    </div>
    <a href="/shutdown">
      <div class="profile-logo-block">
        <img src="/static/image/login.png" />
        <p>EXIT</p>
      </div>
    </a>
  </nav>
  <!-- <div class="header-nav">
  <div class="header-nav-wrapper">
  <span id="logo">Mae Tao Clinic</span>
  <a id="home" href="{{ url_for('home') }}">← back to home </a>
</div>
</div> -->
<div class="console">
  <div class="progress-bar-box" id="main-content">
    <div class="progress-bar-wrapper">
      <a href="">
        <div class="back-button">←</div>
      </a>
      <div class="progress-bar"></div>
    </div>
  </div>
  <div class="console-wrapper">
    <div class="nav">
      <p class="caption">{{ name }}</p>
      <h1 id="nav-title">Scan Record</h1>
    </div>

    <!--   <div class="basic-form">
    <form action="upload-scan.html">
    <label for="registration-num">Registration number</label>
    <input type="text" id="registration-num" class="basic-info" name="registration-number" placeholder="Registration number">

    <label for="registration-date">Registration Date</label>
    <input type="text" id="registration-date" class="basic-info" name="registration-date" placeholder="Registration date">

  </br>
  <input type="submit" value="Submit">
</form>

</div> -->


<div class="basic-form" id="upload">


  <div class="page-queue" float="left">
    <p>Page</p>
    <form id="upload-file" method="post" float="left" enctype="multipart/form-data" >

      {% for i in range(0, num_pages) %}
      <div id="page-box{{ i }}" class="page-box page-box-new">
        <div class="page-ph-add">

          <img id="file-thumbnail{{ i }}" src="/static/image/add.png" />
        </div>
        <div class="page-details-add">
          <p>Page {{ i + 1 }}</p>


          <label id="upload-file-instruction" for="file{{ i }}" class="caption"><span id="click-upload">Select a file</span> or drag and drop directly.</label>
          <input name="file" type="file" style="display: none" id="file{{ i }}">
        </div>
      </div>
      {% endfor %}


    </form>

    <!-- <div class="upload-button">
    <button id="upload-file-btn" type="button" class="highlighted disabled">Process records</button>
  </div> -->
  <div class="upload-button">
    <button id="process-live-feed-btn" type="button" class="highlighted">Submit</button>
  </div>
</div>



<div class="camera-feed" id="videoFeed">

  <button id="turn-on-align-btn" type="button" class="highlighted turn-on-feed-btn">Turn on Align Feature</button>
  <img src="{{ url_for('video_feed') }}"  alt="Camera Feed Error" width="100%" height="100%">

  <!-- NOTE: The lines below represent a separate way for the frontend
  for the frontend to pull the live camera feed. In this case, the
   frontend accesses the camera independently.
  For some reason letting the frontend access the camera independently doesn't
  work on Windows. The backend streaming technique (implemented above)
  also keeps things more streamlined as there's only one point of interface
  with the hardware. -->
  <!-- <div class="select camera-select-box"> -->
  <!-- <label for="videoSource">  </label><select id="videoSource"></select> -->
  <!-- NOTE: Switch to line below for a "Video Source: " label next to the dropdown video -->
  <!-- <label for="videoSource"> Video source: </label><select id="videoSource"></select> -->
  <!-- <video width="540" height="620" muted autoplay></video> -->
</div>

</div>
<div id="update">
  <div class="select page-select-box" style="width:100%">
    <label for="pagesDropdown"> View Page: </label><select id="pagesDropdown"></select>
  </div>
</div>
</div>
</div>
<div id="save">
  <div id="save-bar-wrapper">
    <form method=post enctype=multipart/form-data id="save-button-form">
      <button id="save-file-btn" class="disabled" type="button">Save</button>
    </form>
    <div id="save-response"></div>
  </div>
</div>
</body>
<script>
var file_path = "{{ file_path }}";
var form = new Array("{{ num_pages }}");
var current_page = 0;
</script>
<script src="/static/js/d3.min.js"></script>
<script type="text/javascript" src="/static/js/video-stream.js"></script>
<script type="text/javascript" src="/static/js/tool.js"></script>
<script>
// requestLiveFeedResponse();
// runCamera();
// updateVidFeedColor();
</script>
